---
title: 部署国密nginx
date: 2024-1-15 13:14:11
categories: 
- [Linux]
tags: 
- 国密
- gmssl
- nginx
---


> {% label [class]@guanzhi/GmSSL  %}  
> 是由北京大学自主开发的国产商用密码开源库，实现了对国密算法、标准和安全通信协议的全面功能覆盖，支持包括移动端在内的主流操作系统和处理器，支持密码钥匙、密码卡等典型国产密码硬件，提供功能丰富的命令行工具及多种编译语言编程接口。



> {% label [class]@GMSSL 国密实验室  %}  
> 
> 是一个提供国密SSL相关软件/工具/服务的网站，[网站简称国密SSL实验室](https://www.gmssl.cn/gmssl/index.jsp) 版本所有 2020 国密SSL实验室 保留全部权利 云钥网络提供技术支持 京ICP备17056405号-2



> {% label [class]@guanzhi/GmSSL  %}  
> 单独实现了 SM2, SM3, SM4 并不兼容 OpenSSL, 也{% label [class]@不属于OpenSSL的扩展  %}。 



## 一、 openssl国密版安装

- 下载
  ```https://www.gmssl.cn/gmssl/index.jsp```

- 解压
  ``` tar xzfm gmssl_openssl_1.1_b2024_x64_1.tar.gz -C /usr/local ```

## 二、 编译国密nginx

- 下载
  ``` https://nginx.org/download/ ```

- 解压
  ``` tar -xzvf nginx-1.24.0.tar.gz ```

- 修改nginx中关于openssl的配置
  ``` vim auto/lib/openssl/conf ```
  ``` $OPENSSL/.openssl/ ```---> ``` $OPENSSL/ ```

- 编译安装
  ``` shell
  ./configure \
  --prefix=/usr/local/nginx-1.24.0 \
  --without-http_gzip_module \
  --with-http_ssl_module \
  --with-http_stub_status_module \
  --with-http_v2_module \
  --with-stream \
  --with-file-aio \
  --with-openssl="/usr/local/gmssl"
  ```

  ``` make && make install ```