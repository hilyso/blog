---
title: GLIBC升级
date: 2023-12-29 14:59:40
categories: 
- [Linux]
tags: 
- glibc
- make
- gcc
---

## 零、 Environment

CentOS7.9 x86_64 kvm
GLIBC 2.17 升级至 2.28

## 一、 准备工作

### 1.1 升级 GCC 12.3

- 下载: 
	```
	wget --no-check-certificate https://mirrors.nju.edu.cn/gnu/gcc/gcc-12.3.0/gcc-12.3.0.tar.gz
	```
- 解压:
	``` tar -xzvf  gcc-12.3.0.tar.gz```
- 安装依赖: 
	```yum install bzip2 gcc gcc-c++```
- 下载环境: 
	``` /gcc-12.3.0/contrib/download_prerequisites```
<img src="/images/066.update_glibc_gcc_make.md.01.png" width=100% height=100% />

- 编译安装:
	``` cd gcc-12.3.0 ```
	``` mkdir build ```
	``` cd build ```
	``` ../configure -enable-checking=release -enable-language=c,c++ -disable-multilib```
	``` make install ```

- 参数解释:
	```
	enable-languages     #表示你要让你的gcc支持那些语言
	disable-multilib     #不生成编译为其他平台可执行代码的交叉编译器
	disable-checking     #生成的编译器在编译过程中不做额外检查
	enable-checking=xxx  #检查xx
	``` 

- 删除旧版 gcc:
	``` yum remove gcc g++ ```

- 链接新版 gcc (**产出文件默认遵循FHS规范**)
    ``` ln -s /usr/local/bin/gcc /usr/bin/gcc ```

- 验证新版 gcc
  <img src="/images/066.update_glibc_gcc_make.md.02.png" width=100% height=100% />


### 1.2 升级make

- 下载: https://mirrors.nju.edu.cn/gnu/make/

## 二、 升级GLIBC 2.28

查看当前GLIBC版本
``` ldconfig -V ```

### 下载 GLIBC 2.28

- 下载: https://mirrors.nju.edu.cn/gnu/glibc/
